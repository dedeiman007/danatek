(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a3c77"],{"0441":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container-form"},[t("notifications",{attrs:{group:"foo",position:"top right"}}),e._m(0),t("div",{staticClass:"box mt-4"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("label",{staticClass:"mb-2 fw-medium"},[e._v("Name")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.req.name,expression:"req.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter name"},domProps:{value:e.req.name},on:{input:function(t){t.target.composing||e.$set(e.req,"name",t.target.value)}}}),t("div",[e.validation_errors["name"]?t("small",{staticClass:"text-danger size-12"},[e._v(" "+e._s(e.validation_errors.name[0])+" ")]):e._e()])]),t("div",{staticClass:"col-md-6"},[t("label",{staticClass:"mb-2 fw-medium"},[e._v("Category")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.req.category_id,expression:"req.category_id"}],staticClass:"form-control form-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.req,"category_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Select category")]),e._l(e.categories,(function(a){return[t("option",{key:a.id,domProps:{value:a.id}},[e._v(e._s(a.name))])]}))],2),t("div",[e.validation_errors["category_id"]?t("small",{staticClass:"text-danger size-12"},[e._v(" "+e._s(e.validation_errors.category_id[0])+" ")]):e._e()])]),t("div",{staticClass:"col-md-12 mt-3"},[t("label",{staticClass:"mb-2 fw-medium"},[e._v("Image")]),t("div",{staticClass:"row",attrs:{if:e.images.length}},e._l(e.images,(function(a,s){return t("div",{key:s,staticClass:"col-md-3 mb-3"},[t("div",{staticClass:"d-flex align-items-center"},[t("div",{staticClass:"me-3"},[t("input",{staticClass:"images[] form-control file",attrs:{type:"file"},on:{change:function(t){return e.previewImage(s,t)}}})]),t("div",[t("a",{staticClass:"text-danger size-18",attrs:{href:"javascript:void(0)"},on:{click:function(t){return t.preventDefault(),e.removeImage(s,t)}}},[t("i",{staticClass:"fa fa-close"})])])]),t("div",{class:"images["+s+"]-preview"})])})),0),t("button",{staticClass:"btn btn-outline-primary btn-sm px-5",on:{click:function(t){return t.preventDefault(),e.addNewImage.apply(null,arguments)}}},[t("i",{staticClass:"fa fa-plus me-2"}),e._v(" Tambah Gambar Produk ")]),t("div",[e.validation_errors["images"]?t("small",{staticClass:"text-danger size-12"},[e._v(" "+e._s(e.validation_errors.images[0])+" ")]):e._e()])]),t("div",{staticClass:"col-md-12 mt-3"},[t("label",{staticClass:"mb-2 fw-medium"},[e._v("Description")]),t("textarea",{attrs:{id:"description"}}),t("div",[e.validation_errors["description"]?t("small",{staticClass:"text-danger size-12"},[e._v(" "+e._s(e.validation_errors.description[0])+" ")]):e._e()])])])]),t("div",{staticClass:"mt-3"},[t("button",{staticClass:"btn btn-primary px-5 me-3",on:{click:function(t){return e.saveProduct()}}},[e._v("Create")]),t("router-link",{class:{"":!0,active:"admin-article"==this.$route.name},attrs:{to:{name:"admin-product"}}},[t("a",{staticClass:"btn btn-outline-primary px-5"},[e._v(" Cancel ")])])],1)],1)},i=[function(){var e=this,t=e._self._c;return t("div",[t("h4",{staticClass:"fw-ekstra-bold mb-0"},[e._v(" Create Product ")]),t("p",{staticClass:"mt-2 text-gray500"},[e._v(" Lorem ipsum dolor sit amet consectetur, ")])])}],r=a("3a75"),o=a("1157"),n=a.n(o),c={name:"admin-article-create",data(){return{req:{name:"",image:"",description:"",category_id:""},validation_errors:[],is_changing_image:!1,categories:[],images:[],maxImages:3,addImage:"button.add-image"}},created(){this.getCategory()},mounted(){n()("#description").summernote({placeholder:"Enter description",tabsize:2,height:230})},methods:{getCategory(){r["a"].get("/categoryproduct").then(e=>{var t=e.data.data;this.categories=t}).catch(e=>{console.log(e)})},saveProduct(){var e=n()("#description").summernote("code"),t=new FormData;t.append("name",this.req.name),t.append("category_id",this.req.category_id),t.append("description",e),n()('[class~="images[]"]',this.el).each((function(e){e>this.maxImages-1||t.append("images["+e+"]",this.files[0])})),r["a"].post("product",t,{headers:{token:""+localStorage.getItem("token")}}).then(e=>{var t=e.data;this.$notify({group:"foo",type:"success",title:"Success",text:"Data created"}),1==t.success&&setTimeout(()=>window.location.href="/admin/product",1500)}).catch(e=>{this.validation_errors=e.response.data.data})},addNewImage:function(){var e=this.maxImages||-1;e&&this.images.length<e&&this.images.push(""),this.checkImages()},removeImage:function(e){this.images.splice(e,1),this.checkImages()},checkImages:function(){var e=this.maxImages||-1;e&&this.images.length>=e?n()(this.addImage,this.el).prop("disabled",!0):n()(this.addImage,this.el).prop("disabled",!1)},previewImage:function(e,t){var a=new FileReader,s=t.target.files[0];a.addEventListener("load",(function(){n()('[class~="images['+e+']-preview"]',this.el).html('<div class="image-preview" style="background-image: url('+a.result+')"></div>')}),!1),s&&a.readAsDataURL(s)}}},l=c,d=a("2877"),m=Object(d["a"])(l,s,i,!1,null,"879f05ec",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0a3c77.a860eaf4.js.map