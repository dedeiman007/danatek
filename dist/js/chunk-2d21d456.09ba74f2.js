(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21d456"],{d11d:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-form"},[e("notifications",{attrs:{group:"foo",position:"top right"}}),t._m(0),e("div",{staticClass:"box mt-4"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"mb-2 fw-medium"},[t._v("Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.req.name,expression:"req.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter name"},domProps:{value:t.req.name},on:{input:function(e){e.target.composing||t.$set(t.req,"name",e.target.value)}}}),e("div",[t.validation_errors["name"]?e("small",{staticClass:"text-danger size-12"},[t._v(" "+t._s(t.validation_errors.name[0])+" ")]):t._e()])]),e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"mb-2 fw-medium"},[t._v("Category")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.req.category_id,expression:"req.category_id"}],staticClass:"form-control form-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.req,"category_id",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:""}},[t._v("Select category")]),t._l(t.categories,(function(a){return[e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])]}))],2),e("div",[t.validation_errors["category_id"]?e("small",{staticClass:"text-danger size-12"},[t._v(" "+t._s(t.validation_errors.category_id[0])+" ")]):t._e()])]),e("div",{staticClass:"col-md-12 mt-3"},[e("label",{staticClass:"mb-2 fw-medium"},[t._v("Image")]),e("div",{staticClass:"row",attrs:{if:t.images.length}},t._l(t.images,(function(a,s){return e("div",{key:s,staticClass:"col-md-3 mb-3"},[e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"me-3"},[e("input",{staticClass:"images[] form-control file",attrs:{type:"file"},on:{change:function(e){return t.previewImage(s,e)}}})]),e("div",[e("a",{staticClass:"text-danger size-18",attrs:{href:"javascript:void(0)"},on:{click:function(e){return e.preventDefault(),t.removeImage(s,e)}}},[e("i",{staticClass:"fa fa-close"})])])]),e("div",{class:"images["+s+"]-preview"})])})),0),e("button",{staticClass:"btn btn-outline-primary btn-sm px-5",on:{click:function(e){return e.preventDefault(),t.addNewImage.apply(null,arguments)}}},[e("i",{staticClass:"fa fa-plus me-2"}),t._v(" Tambah Gambar Produk ")]),e("div",[t.validation_errors["images"]?e("small",{staticClass:"text-danger size-12"},[t._v(" "+t._s(t.validation_errors.images[0])+" ")]):t._e()])]),e("div",{staticClass:"col-md-12 mt-3"},[e("label",{staticClass:"mb-2 fw-medium"},[t._v("Description")]),e("textarea",{attrs:{id:"description"}}),e("div",[t.validation_errors["description"]?e("small",{staticClass:"text-danger size-12"},[t._v(" "+t._s(t.validation_errors.description[0])+" ")]):t._e()])])])]),e("div",{staticClass:"mt-3"},[e("button",{staticClass:"btn btn-primary px-5 me-3",on:{click:function(e){return t.updateProduct()}}},[t._v("Update")]),e("router-link",{class:{"":!0,active:"admin-article"==this.$route.name},attrs:{to:{name:"admin-product"}}},[e("a",{staticClass:"btn btn-outline-primary px-5"},[t._v(" Cancel ")])])],1)],1)},i=[function(){var t=this,e=t._self._c;return e("div",[e("h4",{staticClass:"fw-ekstra-bold mb-0"},[t._v(" Edit Product ")]),e("p",{staticClass:"mt-2 text-gray500"},[t._v(" Lorem ipsum dolor sit amet consectetur, ")])])}],r=a("3a75"),o=a("1157"),n=a.n(o),c={name:"admin-article-edit",data(){return{req:{name:"",images:"",description:"",category_id:""},validation_errors:[],is_changing_image:!1,categories:[],images:[],maxImages:3,addImage:"button.add-image"}},created(){this.getCategory(),this.getProducts()},mounted(){n()("#description").summernote({placeholder:"Enter description",tabsize:2,height:230})},methods:{getProducts(){r["a"].get("/product/"+this.$route.params.id,{headers:{token:""+localStorage.getItem("token")}}).then(t=>{var e=t.data.data;this.req=e,n()("#description").summernote("code",e.description)}).catch(t=>{console.log(t)})},getCategory(){r["a"].get("/categoryproduct").then(t=>{var e=t.data.data;this.categories=e}).catch(t=>{console.log(t)})},updateProduct(){var t=n()("#description").summernote("code"),e=new FormData;e.append("name",this.req.name),e.append("category_id",this.req.category_id),e.append("description",t),n()('[class~="images[]"]',this.el).each((function(t){t>this.maxImages-1||e.append("images["+t+"]",this.files[0])})),r["a"].post("product/update/"+this.$route.params.id,e,{headers:{token:""+localStorage.getItem("token")}}).then(t=>{var e=t.data;this.$notify({group:"foo",type:"success",title:"Success",text:"Data created"}),1==e.success&&setTimeout(()=>window.location.href="/admin/product",1500)}).catch(t=>{this.validation_errors=t.response.data.data})},addNewImage:function(){var t=this.maxImages||-1;t&&this.images.length<t&&this.images.push(""),this.checkImages()},removeImage:function(t){this.images.splice(t,1),this.checkImages()},checkImages:function(){var t=this.maxImages||-1;t&&this.images.length>=t?n()(this.addImage,this.el).prop("disabled",!0):n()(this.addImage,this.el).prop("disabled",!1)},previewImage:function(t,e){var a=new FileReader,s=e.target.files[0];a.addEventListener("load",(function(){n()('[class~="images['+t+']-preview"]',this.el).html('<div class="image-preview" style="background-image: url('+a.result+')"></div>')}),!1),s&&a.readAsDataURL(s)}}},d=c,l=a("2877"),m=Object(l["a"])(d,s,i,!1,null,"77ad6669",null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d21d456.09ba74f2.js.map