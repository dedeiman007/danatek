{"remainingRequest":"D:\\Project\\movies-apps\\node_modules\\babel-loader\\lib\\index.js!D:\\Project\\movies-apps\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Project\\movies-apps\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Project\\movies-apps\\src\\views\\Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Project\\movies-apps\\src\\views\\Search.vue","mtime":1668488637170},{"path":"D:\\Project\\movies-apps\\babel.config.js","mtime":1668488625377},{"path":"D:\\Project\\movies-apps\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668488627837},{"path":"D:\\Project\\movies-apps\\node_modules\\babel-loader\\lib\\index.js","mtime":1668488627092},{"path":"D:\\Project\\movies-apps\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668488627837},{"path":"D:\\Project\\movies-apps\\node_modules\\vue-loader\\lib\\index.js","mtime":1668488636763}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEFwaSBmcm9tICcuLi9hcGkvQXBpJzsKaW1wb3J0IENhcmRMb2FkZXIgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkTG9hZGVyLnZ1ZSc7CmltcG9ydCBNb3ZpZUNhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9Nb3ZpZUNhcmQudnVlJzsKaW1wb3J0IFR2U2hvd0NhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9UdlNob3dDYXJkLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDYXJkTG9hZGVyLAogICAgTW92aWVDYXJkLAogICAgVHZTaG93Q2FyZAogIH0sCiAgbmFtZTogJ1NlYXJjaCcsCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbWFnZV9jb25maWd1cmF0aW9uOiBudWxsLAogICAgICBzZWFyY2hlZF9tb3ZpZXM6IFtdLAogICAgICBpc19zZWFyY2hlZF9tb3ZpZXNfcmVhZHk6IGZhbHNlLAogICAgICBxdWVyeTogJycKICAgIH07CiAgfSwKCiAgd2F0Y2g6IHsKICAgICckcm91dGUucXVlcnknOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLiRyb3V0ZS5xdWVyeSkubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMucXVlcnkgPSB0aGlzLiRyb3V0ZS5xdWVyeS5zZWFyY2g7CiAgICAgICAgdGhpcy5zZWFyY2hNb3ZpZSgpOwogICAgICB9CiAgICB9CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Q29uZmlndXJhdGlvbigpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIHNlYXJjaE1vdmllKCkgewogICAgICBBcGkuZ2V0KGAvc2VhcmNoL211bHRpYCwgewogICAgICAgIHBhcmFtczogewogICAgICAgICAgcXVlcnk6IHRoaXMucXVlcnkKICAgICAgICB9CiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLnJlc3VsdHM7CiAgICAgICAgdGhpcy5zZWFyY2hlZF9tb3ZpZXMgPSBkYXRhOwogICAgICAgIHRoaXMuaXNfc2VhcmNoZWRfbW92aWVzX3JlYWR5ID0gdHJ1ZTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICB0aGlzLmlzX3NlYXJjaGVkX21vdmllc19yZWFkeSA9IGZhbHNlOwogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKCiAgICBnZXRDb25maWd1cmF0aW9uKCkgewogICAgICBBcGkuZ2V0KGAvY29uZmlndXJhdGlvbmApLnRoZW4ocmVzID0+IHsKICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhLmltYWdlczsKICAgICAgICB0aGlzLmltYWdlX2NvbmZpZ3VyYXRpb24gPSBkYXRhOwogICAgICAgIHRoaXMucXVlcnkgPSB0aGlzLiRyb3V0ZS5xdWVyeS5zZWFyY2g7CiAgICAgICAgdGhpcy5zZWFyY2hNb3ZpZSgpOwogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKCiAgICBnZW5lcmF0ZUltYWdlVXJsKGltYWdlLCBiaWcpIHsKICAgICAgdmFyIGNvbmZpZyA9IHRoaXMuaW1hZ2VfY29uZmlndXJhdGlvbjsKCiAgICAgIGlmIChiaWcpIHsKICAgICAgICByZXR1cm4gY29uZmlnLmJhc2VfdXJsICsgY29uZmlnLnBvc3Rlcl9zaXplc1s1XSArIGltYWdlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBjb25maWcuYmFzZV91cmwgKyBjb25maWcucG9zdGVyX3NpemVzWzJdICsgaW1hZ2U7CiAgICAgIH0KICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":"AAwBA;AACA;AACA;AACA;AAEA;EACAA;IACAC,UADA;IAEAC,SAFA;IAGAC;EAHA,CADA;EAMAC,cANA;;EAOAC;IACA;MACAC,yBADA;MAEAC,mBAFA;MAGAC,+BAHA;MAIAC;IAJA;EAMA,CAdA;;EAeAC;IACA;MACA;QACA;QACA;MACA;IACA;EANA,CAfA;;EAuBAC;IACA;EACA,CAzBA;;EA0BAC;IACAC;MACAC;QACAC;UACAN;QADA;MADA,GAKAO,IALA,CAKAC;QACA;QACA;QACA;MACA,CATA,EAUAC,KAVA,CAUAC;QACA;QACAC;MACA,CAbA;IAcA,CAhBA;;IAiBAC;MACAP,0BACAE,IADA,CACAC;QACA;QACA;QACA;QACA;MACA,CANA,EAOAC,KAPA,CAOAC;QACAC;MACA,CATA;IAUA,CA5BA;;IA6BAE;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA;;EApCA;AA1BA","names":["components","CardLoader","MovieCard","TvShowCard","name","data","image_configuration","searched_movies","is_searched_movies_ready","query","watch","created","methods","searchMovie","Api","params","then","res","catch","err","console","getConfiguration","generateImageUrl"],"sourceRoot":"src/views","sources":["Search.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-space\">\r\n    <div class=\"container\">\r\n      <h4 class=\"section-title\">\r\n        Result for '{{ this.query }}'\r\n      </h4>\r\n      <div class=\"movies\" v-if=\"is_searched_movies_ready\">\r\n        <template  v-for=\"movie in searched_movies\" >\r\n          <template v-if=\"movie.title\">\r\n            <MovieCard class=\"movie-card\" :movie=\"movie\" :image-configuration=\"image_configuration\"  :key=\"'searched' + movie.id\"/>\r\n          </template>\r\n          <template v-else>\r\n            <TvShowCard class=\"movie-card\" :show=\"movie\" :image-configuration=\"image_configuration\"  :key=\"'searched' + movie.id\"/>\r\n          </template>\r\n        </template>\r\n      </div>\r\n      <div v-else>\r\n        <CardLoader />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Api from '../api/Api';\r\nimport CardLoader from '../components/CardLoader.vue';\r\nimport MovieCard from '../components/MovieCard.vue';\r\nimport TvShowCard from '../components/TvShowCard.vue';\r\n\r\nexport default {\r\n  components: {\r\n    CardLoader,\r\n    MovieCard,\r\n    TvShowCard,\r\n  },\r\n  name: 'Search',\r\n  data() {\r\n    return{\r\n      image_configuration: null,\r\n      searched_movies: [],\r\n      is_searched_movies_ready: false,\r\n      query: ''\r\n    }\r\n  },\r\n  watch: {\r\n      '$route.query': function () {\r\n          if(Object.keys(this.$route.query).length > 0) {\r\n              this.query = this.$route.query.search\r\n              this.searchMovie()\r\n          }\r\n      },\r\n  },\r\n  created() {\r\n    this.getConfiguration()\r\n  },\r\n  methods: {\r\n    searchMovie() {\r\n        Api.get(`/search/multi`, {\r\n          params: {\r\n            query: this.query\r\n          }\r\n        })\r\n          .then((res) => {\r\n              var data = res.data.results\r\n              this.searched_movies = data\r\n              this.is_searched_movies_ready = true\r\n          })\r\n          .catch((err) => {\r\n              this.is_searched_movies_ready = false\r\n              console.log(err)\r\n          })\r\n    },\r\n    getConfiguration() {\r\n      Api.get(`/configuration`)\r\n          .then((res) => {\r\n              var data = res.data.images\r\n              this.image_configuration = data\r\n              this.query = this.$route.query.search\r\n              this.searchMovie()\r\n          })\r\n          .catch((err) => {\r\n              console.log(err)\r\n          })\r\n    },\r\n    generateImageUrl(image, big) {\r\n      var config = this.image_configuration\r\n      if(big){\r\n        return config.base_url + config.poster_sizes[5] + image\r\n      }else{\r\n        return config.base_url + config.poster_sizes[2] + image\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}